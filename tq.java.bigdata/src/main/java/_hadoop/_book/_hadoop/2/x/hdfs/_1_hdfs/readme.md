2018-11-30

## hdfs

### 基本概念
1. 数据块(Block)
    - HDFS文件是以数据块的形式存储
    - 默认 128MB
    - 所有文件切分若干个数据块分布在数据节点上存储
    - 冗余备份, 默认3份
2. 名字节点(Namenode)
    - Master/Salve结构
    - **名字节点就是主节点**
    - 管理文件系统的命名空间
        - 文件系统目录树
        - 文件/目录信息
        - 文件的数据索引
    - 保存数据块和数据节点的映射关系
    - 高可用支持
        - 活动名字节点和备用名字节点
    - 问题
        - 因为保存了数据块和数据节点的映射关系, 集群中文件过多, 名字节点的内存将成为限制系统横线扩展的瓶颈
    - 解决
        - 联邦HDFS机制
            - 多个名字节点
            - 管理文件系统中的一部分
            - 相互隔离
3. 数据节点(Datanode)
    - 从节点
    - 接受请求与调度存储或读出数据
    - 向名字节点发送心跳, 数据块汇报, 缓存汇报
4. 客户端
    - 命令行
    - 浏览器
    - API
5. HDFS 通讯协议
    - Hadoop RPC
    - 流式接口: TCP/HTTP
    
###