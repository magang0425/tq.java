2018-01-31

### 内存屏障
1. 确保从另一个CPU来看屏障的两边的所有指令都是正确的程序顺序，而保持程序顺序的外部可见性
2. 们可以实现内存数据可见性，确保内存数据会同步到CPU缓存子系统

### Store Barrier
1. 是x86的”sfence“指令，
2. 强制所有在store屏障指令之前的store指令，**都在该store屏障指令执行之前被执行**，
3. 并把store缓冲区的数据都刷到CPU缓存。
4. 这会使得程序状态对其它CPU可见，这样其它CPU可以根据需要介入

### Load Barrier
1. 是x86上的”ifence“指令，
2. 强制所有在load屏障指令之后的load指令, **都在该load屏障指令执行之后被执行**，
3. 并且一直等到load缓冲区被该CPU读完才能执行之后的load指令。
4. 这使得从其它CPU暴露出来的程序状态对该CPU可见，这之后CPU可以进行后续处理