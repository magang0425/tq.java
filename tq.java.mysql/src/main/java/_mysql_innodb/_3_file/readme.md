2019-02-14

## 文件

### 参数文件

### 日志文件
1. 错误日志(error log)
2. 二进制日志(bin log)
    - **记录对 Mysql 数据库执行更改的所有操作**
    - 即使操作没有导致数据库发生变化
3. 慢查询日志(slow query log)
4. 查询日志(log)

### 二进制文件
1. sync_binlog = [N]
    - 表示每写缓冲多少次就同步磁盘
    - 1:采用同步写磁盘的方式来写二进制文件
    - 问题
        - sync_binlog = 1
        - 在 commit 动作之前, 二进制日志立即写磁盘, 提交没有发生, 数据库宕机
        - mysql 数据库下次启动时, 由于 commit没有发生, 事务会被胡回滚
        - 但是二进制日志已经记录了该事务信息, 不能回滚
        - innodb_support_xa=1来解决
2. binlog_format
    - 影响记录二进制日志的格式
    - 5.1之前
        - STATEMENT
        - 基于SQL 语句级别
        - **但是如果主 服务器运行 rand, uuid 等函数, 或者触发器, 导致主从服务器数据不一致**
    - 5.1 之后
        - ROW
            - 记录表的更改情况
            - 极大的增加 binlog 文件的大小
            - 对磁盘要求增加, 增加复制时的网络开销
        - MIXED