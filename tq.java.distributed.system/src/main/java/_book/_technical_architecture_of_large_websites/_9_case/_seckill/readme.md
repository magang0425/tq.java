2018-12-15

## 秒杀

### 秒杀活动的技术挑战
1. 对现有业务造成冲击
2. 高并发下的应用和数据库负载
3. 突然增加的网络以及服务器带宽
4. 直接下单
    - 不能仅仅是个url
    
### 应对策略
1. 秒杀系统独立部署
2. 秒杀商品页面静态化
3. 租借秒杀活动网络带宽
3. 动态生成随机下单页面url

### 架构设计
1. 用户关心
    - 如何快速刷新商品页面
2. 只有第一个提交的订单发送给网站的订单子系统, 其余的都只能看到秒杀结束页面
3. 其他问题
    - 如何控制秒杀商品页面购买按钮的点亮
        - JavaScript脚本控制, 
            - 加入秒杀的是否开始的标志,和下单页面URL的随机数参数
            - 不被浏览器, CDN和反向代理服务器缓存
    - 如何允许第一个提交的订单被发送到订单子系统
        - 现在集群中每台服务器的最多接受请求数量
        - 然后检查全局已提交的订单数目
        - 最后提交订单子系统