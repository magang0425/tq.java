2018-04-19

## Semaphore

### 原理
1. 和 CountDonwLatch 差不多
2. 只是一个在 await()的时候 进入等待队列, 一个在acquire等待列队
3. 一个在 countDown() 唤醒头部, 一个是在 release() 唤醒头部

### 使用场景
1. 经常用于限制获取某种资源的线程数量
2. **做流量分流**:特别是对公共资源有限的场景，比如数据库连接。
   假设有这个的需求，读取几万个文件的数据到数据库中，由于文件读取是IO密集型任务，可以启动几十个线程并发读取，
   但是数据库连接数只有10个，这时就必须控制最多只有10个线程能够拿到数据库连接进行操作。
   这个时候，就可以使用Semaphore做流量控制。
